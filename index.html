<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>PZ Blueprint</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="css/base.css" />
  <link rel="stylesheet" href="css/tiles.css" />
  <link rel="stylesheet" href="css/furniture.css" />
</head>

<body class="drawer-mode">
  <div id="app">
    <header class="topbar" id="app-header">
      <div class="brand">
        <span class="brand-mark">PZ</span>
        <div class="brand-copy">
          <span class="brand-title">PZ Blueprint</span>
          <span class="brand-subtitle">Collaborative Project Zomboid planner</span>
        </div>
      </div>
      <div class="topbar-center">
        <div class="project-title-row">
          <h1 id="project-title" class="project-title" role="button" tabindex="0">My Blueprint</h1>
          <div class="project-meta">
            <button id="project-version" class="chip" type="button" aria-label="Edit version">v1</button>
            <button id="project-version-inc" class="chip" type="button" aria-label="Increase version">+1</button>
          </div>
        </div>
      </div>
      <div class="top-actions">
        <div class="grid-menu">
          <button id="grid-size" class="chip" type="button">20 x 20</button>
          <div class="grid-size-popover is-hidden" id="grid-size-popover" role="dialog" aria-label="Grid size">
            <div class="grid-size-field">
              <label for="grid-rows">Rows</label>
              <input id="grid-rows" type="number" min="5" max="200" value="20" />
            </div>
            <div class="grid-size-field">
              <label for="grid-cols">Columns</label>
              <input id="grid-cols" type="number" min="5" max="200" value="20" />
            </div>
            <div class="grid-size-actions">
              <button id="grid-apply" class="chip" type="button">Apply</button>
              <button id="grid-cancel" class="chip" type="button">Cancel</button>
            </div>
          </div>
        </div>
        <button id="import-btn" class="btn ghost" type="button">Import</button>
        <div class="export-menu">
          <button id="export-btn" class="btn ghost" type="button">Export</button>
          <div class="export-popover is-hidden" id="export-popover" role="dialog" aria-label="Export options">
            <button class="chip" data-export="clean" type="button">PNG (No Grid)</button>
            <button class="chip" data-export="grid" type="button">PNG (Grid)</button>
          </div>
        </div>
        <button id="share-btn" class="btn primary" type="button">Share</button>
        <button id="help-btn" class="chip help-chip" type="button" aria-label="Help">?</button>
      </div>
    </header>

    <main class="workspace">
      <section class="canvas-panel">
        <div class="canvas-header">
          <div class="canvas-actions">
            <div class="toolbar mode-toolbar" id="toolbar" aria-label="Mode selection">
              <div class="mode-row">
                <button id="mode-cursor" class="tool-button is-active" data-mode="cursor" type="button" data-tooltip="Cursor - Pan" aria-label="Cursor">
                  <span class="tool-icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24" role="presentation" focusable="false">
                      <path d="M5 4l6.5 15 1.8-5.2 5.2-1.8z" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round" />
                    </svg>
                  </span>
                </button>
                <button id="mode-floor" class="tool-button" data-mode="floor" type="button" data-tooltip="Floor - Paint" aria-label="Floor">
                  <span class="tool-icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24" role="presentation" focusable="false">
                      <rect x="4" y="4" width="16" height="16" rx="2" fill="none" stroke="currentColor" stroke-width="1.6" />
                      <path d="M12 4v16M4 12h16" fill="none" stroke="currentColor" stroke-width="1.4" />
                    </svg>
                  </span>
                </button>
                <button id="mode-wall" class="tool-button" data-mode="wall" type="button" data-tooltip="Wall - Edge" aria-label="Wall">
                  <span class="tool-icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24" role="presentation" focusable="false">
                      <rect x="4" y="6" width="16" height="12" rx="1.5" fill="none" stroke="currentColor" stroke-width="1.6" />
                      <path d="M4 12h16M9 6v6M15 12v6" fill="none" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" />
                    </svg>
                  </span>
                </button>
                <button id="mode-door" class="tool-button" data-mode="door" type="button" data-tooltip="Door - Edge" aria-label="Door">
                  <span class="tool-icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24" role="presentation" focusable="false">
                      <rect x="6" y="4" width="12" height="16" rx="1.5" fill="none" stroke="currentColor" stroke-width="1.6" />
                      <circle cx="14" cy="12" r="1" fill="currentColor" />
                    </svg>
                  </span>
                </button>
                <button id="mode-furniture" class="tool-button" data-mode="furniture" type="button" data-tooltip="Furniture - Place" aria-label="Furniture">
                  <span class="tool-icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24" role="presentation" focusable="false">
                      <rect x="5" y="10" width="14" height="6" rx="2" fill="none" stroke="currentColor" stroke-width="1.6" />
                      <path d="M7 10V8h10v2M7 16v2M17 16v2" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" />
                    </svg>
                  </span>
                </button>
                <button id="mode-rooms" class="tool-button" data-mode="rooms" type="button" data-tooltip="Room - Drag" aria-label="Room">
                  <span class="tool-icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24" role="presentation" focusable="false">
                      <rect x="5" y="5" width="14" height="14" rx="2" fill="none" stroke="currentColor" stroke-width="1.6" stroke-dasharray="3 2" />
                    </svg>
                  </span>
                </button>
                <button class="tool-button tool-erase" id="mode-erase" data-mode="erase" type="button" data-tooltip="Erase - Clear" aria-label="Erase">
                  <span class="tool-icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24" role="presentation" focusable="false">
                      <path d="M5 15l6-6 6 6-4 4H9z" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round" />
                      <path d="M13 19h6" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" />
                    </svg>
                  </span>
                </button>
              </div>
              <div class="toolbar-footer">
                <div class="toolbar-chip is-static">Tile 40px</div>
                <div class="toolbar-rotation">
                  <span>Rotation</span>
                  <button id="rotate-btn" class="chip" type="button">North</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div id="canvas-viewport">
          <div id="grid-wrapper">
            <div id="floor-layer"></div>
            <div id="furniture-layer"></div>
            <div id="grid"></div>
            <div id="grid-lines"></div>
            <div id="wall-layer"></div>
            <div id="door-layer"></div>
            <div id="preview-layer"></div>
            <div id="room-preview" class="room-preview"></div>
          </div>
        </div>
      </section>

      <aside class="inspector" id="inspector">
        <div class="panel" id="search-section" style="--delay: 0.02s">
          <div class="panel-header">
            <h2>Quick Find</h2>
          </div>
          <div class="panel-body">
            <input id="palette-search" class="palette-search" type="search" placeholder="Search tiles, walls, furniture" aria-label="Search palettes" />
          </div>
        </div>

        <div class="panel" id="material-section" style="--delay: 0.05s">
          <div class="panel-header">
            <h2>Floor Palette</h2>
            <button class="panel-toggle" data-panel-toggle type="button" aria-expanded="true">-</button>
          </div>
          <div class="panel-body">
            <div class="palette-grid">
              <button class="palette-item" data-material="asphalt" type="button">
                <span class="swatch"></span>
                <span class="label">Asphalt</span>
              </button>
              <button class="palette-item" data-material="bathroom" type="button">
                <span class="swatch"></span>
                <span class="label">Bathroom</span>
              </button>
              <button class="palette-item" data-material="brick" type="button">
                <span class="swatch"></span>
                <span class="label">Brick</span>
              </button>
              <button class="palette-item" data-material="carpet" type="button">
                <span class="swatch"></span>
                <span class="label">Carpet: Tile</span>
              </button>
              <button class="palette-item" data-material="cobblestone" type="button">
                <span class="swatch"></span>
                <span class="label">Cobblestone</span>
              </button>
              <button class="palette-item" data-material="concrete" type="button">
                <span class="swatch"></span>
                <span class="label">Concrete</span>
              </button>
              <button class="palette-item" data-material="concreteCracked" type="button">
                <span class="swatch"></span>
                <span class="label">Concrete: Cracked</span>
              </button>
              <button class="palette-item" data-material="dirt" type="button">
                <span class="swatch"></span>
                <span class="label">Dirt</span>
              </button>
              <button class="palette-item" data-material="dryGrass" type="button">
                <span class="swatch"></span>
                <span class="label">Grass: Dry</span>
              </button>
              <button class="palette-item" data-material="lushGrass" type="button">
                <span class="swatch"></span>
                <span class="label">Grass: Lush</span>
              </button>
              <button class="palette-item" data-material="grass" type="button">
                <span class="swatch"></span>
                <span class="label">Grass: Manicured</span>
              </button>
              <button class="palette-item" data-material="tallGrass" type="button">
                <span class="swatch"></span>
                <span class="label">Grass: Tall</span>
              </button>
              <button class="palette-item" data-material="gravel" type="button">
                <span class="swatch"></span>
                <span class="label">Gravel</span>
              </button>
              <button class="palette-item" data-material="hay" type="button">
                <span class="swatch"></span>
                <span class="label">Hay</span>
              </button>
              <button class="palette-item" data-material="kitchen" type="button">
                <span class="swatch"></span>
                <span class="label">Kitchen</span>
              </button>
              <button class="palette-item" data-material="leafLitter" type="button">
                <span class="swatch"></span>
                <span class="label">Leaf Litter</span>
              </button>
              <button class="palette-item" data-material="medical" type="button">
                <span class="swatch"></span>
                <span class="label">Medical</span>
              </button>
              <button class="palette-item" data-material="mud" type="button">
                <span class="swatch"></span>
                <span class="label">Mud</span>
              </button>
              <button class="palette-item" data-material="parkingLot" type="button">
                <span class="swatch"></span>
                <span class="label">Parking Lot</span>
              </button>
              <button class="palette-item is-active" data-material="sand" type="button">
                <span class="swatch"></span>
                <span class="label">Sand</span>
              </button>
              <button class="palette-item" data-material="concreteBlock" type="button">
                <span class="swatch"></span>
                <span class="label">Sidewalk</span>
              </button>
              <button class="palette-item" data-material="checkerTile" type="button">
                <span class="swatch"></span>
                <span class="label">Tile: Checker</span>
              </button>
              <button class="palette-item" data-material="tileSlate" type="button">
                <span class="swatch"></span>
                <span class="label">Tile: Slate</span>
              </button>
              <button class="palette-item" data-material="tileTerracotta" type="button">
                <span class="swatch"></span>
                <span class="label">Tile: Terracotta</span>
              </button>
              <button class="palette-item" data-material="water" type="button">
                <span class="swatch"></span>
                <span class="label">Water</span>
              </button>
              <button class="palette-item" data-material="wood" type="button">
                <span class="swatch"></span>
                <span class="label">Wood: Basic</span>
              </button>
              <button class="palette-item" data-material="woodParquet" type="button">
                <span class="swatch"></span>
                <span class="label">Wood: Parquet</span>
              </button>
              <button class="palette-item" data-material="woodPlank" type="button">
                <span class="swatch"></span>
                <span class="label">Wood: Plank</span>
              </button>
            </div>
          </div>
        </div>

        <div class="panel" id="blend-section" style="--delay: 0.08s">
          <div class="panel-header">
            <h2>Blend Mode</h2>
            <button class="panel-toggle" data-panel-toggle type="button" aria-expanded="true">-</button>
          </div>
          <div class="panel-body">
            <div class="blend-mode-grid">
            <button class="chip blend-toggle is-active" data-blend-mode="none" type="button">None</button>
            <button class="chip blend-toggle" data-blend-mode="diag-manual" type="button">Diagonal Manual</button>
            <button class="chip blend-toggle" data-blend-mode="quarter-manual" type="button">Quarter Manual</button>
            <button class="chip blend-toggle" data-blend-mode="diag-auto" type="button">Diagonal Auto</button>
            </div>

            <div id="blend-diagonal-controls" class="blend-controls is-hidden">
            <span class="blend-label">Diagonal</span>
            <div class="blend-control-grid">
              <button class="chip blend-toggle is-active" data-blend-diagonal="slash" type="button">/</button>
              <button class="chip blend-toggle" data-blend-diagonal="backslash" type="button">\</button>
            </div>
            </div>

            <div id="blend-quarter-controls" class="blend-controls is-hidden">
            <span class="blend-label">Quarter</span>
            <div class="blend-control-grid">
              <button class="chip blend-toggle is-active" data-blend-quarter="tl" type="button">A</button>
              <button class="chip blend-toggle" data-blend-quarter="tr" type="button">B</button>
              <button class="chip blend-toggle" data-blend-quarter="bl" type="button">C</button>
              <button class="chip blend-toggle" data-blend-quarter="br" type="button">D</button>
            </div>
            </div>

            <div id="blend-secondary-section" class="blend-secondary is-hidden">
            <h3>Blend With</h3>
            <div class="palette-grid blend-grid">
              <button class="palette-item" data-blend-material="asphalt" type="button">
                <span class="swatch"></span>
                <span class="label">Asphalt</span>
              </button>
              <button class="palette-item" data-blend-material="bathroom" type="button">
                <span class="swatch"></span>
                <span class="label">Bathroom</span>
              </button>
              <button class="palette-item" data-blend-material="brick" type="button">
                <span class="swatch"></span>
                <span class="label">Brick</span>
              </button>
              <button class="palette-item" data-blend-material="carpet" type="button">
                <span class="swatch"></span>
                <span class="label">Carpet: Tile</span>
              </button>
              <button class="palette-item" data-blend-material="cobblestone" type="button">
                <span class="swatch"></span>
                <span class="label">Cobblestone</span>
              </button>
              <button class="palette-item" data-blend-material="concrete" type="button">
                <span class="swatch"></span>
                <span class="label">Concrete</span>
              </button>
              <button class="palette-item" data-blend-material="concreteCracked" type="button">
                <span class="swatch"></span>
                <span class="label">Concrete: Cracked</span>
              </button>
              <button class="palette-item" data-blend-material="dirt" type="button">
                <span class="swatch"></span>
                <span class="label">Dirt</span>
              </button>
              <button class="palette-item" data-blend-material="dryGrass" type="button">
                <span class="swatch"></span>
                <span class="label">Grass: Dry</span>
              </button>
              <button class="palette-item" data-blend-material="lushGrass" type="button">
                <span class="swatch"></span>
                <span class="label">Grass: Lush</span>
              </button>
              <button class="palette-item" data-blend-material="grass" type="button">
                <span class="swatch"></span>
                <span class="label">Grass: Manicured</span>
              </button>
              <button class="palette-item" data-blend-material="tallGrass" type="button">
                <span class="swatch"></span>
                <span class="label">Grass: Tall</span>
              </button>
              <button class="palette-item" data-blend-material="gravel" type="button">
                <span class="swatch"></span>
                <span class="label">Gravel</span>
              </button>
              <button class="palette-item" data-blend-material="hay" type="button">
                <span class="swatch"></span>
                <span class="label">Hay</span>
              </button>
              <button class="palette-item" data-blend-material="kitchen" type="button">
                <span class="swatch"></span>
                <span class="label">Kitchen</span>
              </button>
              <button class="palette-item" data-blend-material="leafLitter" type="button">
                <span class="swatch"></span>
                <span class="label">Leaf Litter</span>
              </button>
              <button class="palette-item" data-blend-material="medical" type="button">
                <span class="swatch"></span>
                <span class="label">Medical</span>
              </button>
              <button class="palette-item" data-blend-material="mud" type="button">
                <span class="swatch"></span>
                <span class="label">Mud</span>
              </button>
              <button class="palette-item" data-blend-material="parkingLot" type="button">
                <span class="swatch"></span>
                <span class="label">Parking Lot</span>
              </button>
              <button class="palette-item is-active" data-blend-material="sand" type="button">
                <span class="swatch"></span>
                <span class="label">Sand</span>
              </button>
              <button class="palette-item" data-blend-material="concreteBlock" type="button">
                <span class="swatch"></span>
                <span class="label">Sidewalk</span>
              </button>
              <button class="palette-item" data-blend-material="checkerTile" type="button">
                <span class="swatch"></span>
                <span class="label">Tile: Checker</span>
              </button>
              <button class="palette-item" data-blend-material="tileSlate" type="button">
                <span class="swatch"></span>
                <span class="label">Tile: Slate</span>
              </button>
              <button class="palette-item" data-blend-material="tileTerracotta" type="button">
                <span class="swatch"></span>
                <span class="label">Tile: Terracotta</span>
              </button>
              <button class="palette-item" data-blend-material="water" type="button">
                <span class="swatch"></span>
                <span class="label">Water</span>
              </button>
              <button class="palette-item" data-blend-material="wood" type="button">
                <span class="swatch"></span>
                <span class="label">Wood: Basic</span>
              </button>
              <button class="palette-item" data-blend-material="woodParquet" type="button">
                <span class="swatch"></span>
                <span class="label">Wood: Parquet</span>
              </button>
              <button class="palette-item" data-blend-material="woodPlank" type="button">
                <span class="swatch"></span>
                <span class="label">Wood: Plank</span>
              </button>
            </div>
            </div>
          </div>
        </div>

        <div class="panel is-hidden" id="tile-color-section" style="--delay: 0.12s">
          <div class="panel-header">
            <h2>Tile Colors</h2>
            <button class="panel-toggle" data-panel-toggle type="button" aria-expanded="true">-</button>
          </div>
          <div class="panel-body">
            <div class="color-controls">
              <div class="color-control">
                <div class="color-label">Color A</div>
                <div class="color-input-row">
                  <input id="custom-color-a" type="color" value="#b0372f" />
                  <span class="color-value" id="custom-color-a-value">#b0372f</span>
                </div>
              </div>
              <div class="color-control">
                <div class="color-label">Color B</div>
                <div class="color-input-row">
                  <input id="custom-color-b" type="color" value="#f2f2ee" />
                  <span class="color-value" id="custom-color-b-value">#f2f2ee</span>
                </div>
                <div class="color-note">Used by checker tiles.</div>
              </div>
            </div>
          </div>
        </div>

        <div class="panel is-hidden" id="wall-section" style="--delay: 0.1s">
          <div class="panel-header">
            <h2>Wall Types</h2>
            <button class="panel-toggle" data-panel-toggle type="button" aria-expanded="true">-</button>
          </div>
          <div class="panel-body">
            <div class="palette-grid">
              <button class="palette-item" data-wall="brickWall" type="button">
                <span class="swatch"></span>
                <span class="label">Brick Wall</span>
              </button>
              <button class="palette-item" data-wall="chainLinkFence" type="button">
                <span class="swatch"></span>
                <span class="label">Chain Link Fence</span>
              </button>
              <button class="palette-item" data-wall="concreteWall" type="button">
                <span class="swatch"></span>
                <span class="label">Concrete Wall</span>
              </button>
              <button class="palette-item" data-wall="logWall" type="button">
                <span class="swatch"></span>
                <span class="label">Log Wall</span>
              </button>
              <button class="palette-item" data-wall="metalWall" type="button">
                <span class="swatch"></span>
                <span class="label">Metal Wall</span>
              </button>
              <button class="palette-item" data-wall="picketFence" type="button">
                <span class="swatch"></span>
                <span class="label">Picket Fence</span>
              </button>
              <button class="palette-item" data-wall="plasterWall" type="button">
                <span class="swatch"></span>
                <span class="label">Plaster Wall</span>
              </button>
              <button class="palette-item" data-wall="stallWall" type="button">
                <span class="swatch"></span>
                <span class="label">Stall Wall</span>
              </button>
              <button class="palette-item is-active" data-wall="standard" type="button">
                <span class="swatch"></span>
                <span class="label">Standard Wall</span>
              </button>
              <button class="palette-item" data-wall="woodenFence" type="button">
                <span class="swatch"></span>
                <span class="label">Wood Fence</span>
              </button>
            </div>
          </div>
        </div>

        <div class="panel is-hidden" id="door-section" style="--delay: 0.15s">
          <div class="panel-header">
            <h2>Door Types</h2>
            <button class="panel-toggle" data-panel-toggle type="button" aria-expanded="true">-</button>
          </div>
          <div class="panel-body">
            <div class="palette-grid">
              <button class="palette-item" data-door="chainGate" type="button">
                <span class="swatch"></span>
                <span class="label">Chain Gate</span>
              </button>
              <button class="palette-item" data-door="fenceGate" type="button">
                <span class="swatch"></span>
                <span class="label">Fence Gate</span>
              </button>
              <button class="palette-item" data-door="garageDoor" type="button">
                <span class="swatch"></span>
                <span class="label">Garage Door</span>
              </button>
              <button class="palette-item" data-door="glassDoor" type="button">
                <span class="swatch"></span>
                <span class="label">Glass Door</span>
              </button>
              <button class="palette-item" data-door="logGate" type="button">
                <span class="swatch"></span>
                <span class="label">Log Gate</span>
              </button>
              <button class="palette-item" data-door="metalDoor" type="button">
                <span class="swatch"></span>
                <span class="label">Metal Door</span>
              </button>
              <button class="palette-item" data-door="stallDoor" type="button">
                <span class="swatch"></span>
                <span class="label">Stall Door</span>
              </button>
              <button class="palette-item is-active" data-door="standard" type="button">
                <span class="swatch"></span>
                <span class="label">Standard Door</span>
              </button>
            </div>
          </div>
        </div>

        <div class="panel is-hidden" id="furniture-section" style="--delay: 0.2s">
          <div class="panel-header">
            <h2>Furniture</h2>
            <button class="panel-toggle" data-panel-toggle type="button" aria-expanded="true">-</button>
          </div>
          <div class="panel-body">
            <div class="palette-grid furniture-grid">
              <button class="palette-item" data-furniture="arcadeMachine" type="button">
                <span class="swatch"></span>
                <span class="label">Arcade Machine</span>
              </button>
              <button class="palette-item" data-furniture="armchair" type="button">
                <span class="swatch"></span>
                <span class="label">Armchair</span>
              </button>
              <button class="palette-item" data-furniture="bathroomCounter" type="button">
                <span class="swatch"></span>
                <span class="label">Bathroom Counter</span>
              </button>
              <button class="palette-item" data-furniture="bathroomSink" type="button">
                <span class="swatch"></span>
                <span class="label">Bathroom Sink</span>
              </button>
              <button class="palette-item" data-furniture="bathtub" type="button">
                <span class="swatch"></span>
                <span class="label">Bathtub</span>
              </button>
              <button class="palette-item is-active" data-furniture="bed" type="button">
                <span class="swatch"></span>
                <span class="label">Bed</span>
              </button>
              <button class="palette-item" data-furniture="bookcase" type="button">
                <span class="swatch"></span>
                <span class="label">Bookcase</span>
              </button>
              <button class="palette-item" data-furniture="chair" type="button">
                <span class="swatch"></span>
                <span class="label">Chair</span>
              </button>
              <button class="palette-item" data-furniture="coffeeTable" type="button">
                <span class="swatch"></span>
                <span class="label">Coffee Table</span>
              </button>
              <button class="palette-item" data-furniture="computer" type="button">
                <span class="swatch"></span>
                <span class="label">CRT Computer</span>
              </button>
              <button class="palette-item" data-furniture="desk" type="button">
                <span class="swatch"></span>
                <span class="label">Desk</span>
              </button>
              <button class="palette-item" data-furniture="deskChair" type="button">
                <span class="swatch"></span>
                <span class="label">Desk Chair</span>
              </button>
              <button class="palette-item" data-furniture="diningTable" type="button">
                <span class="swatch"></span>
                <span class="label">Dining Table</span>
              </button>
              <button class="palette-item" data-furniture="dishwasher" type="button">
                <span class="swatch"></span>
                <span class="label">Dishwasher</span>
              </button>
              <button class="palette-item" data-furniture="dresser" type="button">
                <span class="swatch"></span>
                <span class="label">Dresser</span>
              </button>
              <button class="palette-item" data-furniture="dryer" type="button">
                <span class="swatch"></span>
                <span class="label">Dryer</span>
              </button>
              <button class="palette-item" data-furniture="fileCabinet" type="button">
                <span class="swatch"></span>
                <span class="label">File Cabinet</span>
              </button>
              <button class="palette-item" data-furniture="freezer" type="button">
                <span class="swatch"></span>
                <span class="label">Freezer</span>
              </button>
              <button class="palette-item" data-furniture="generator" type="button">
                <span class="swatch"></span>
                <span class="label">Generator</span>
              </button>
              <button class="palette-item" data-furniture="gurney" type="button">
                <span class="swatch"></span>
                <span class="label">Gurney</span>
              </button>
              <button class="palette-item" data-furniture="ivStand" type="button">
                <span class="swatch"></span>
                <span class="label">IV Stand</span>
              </button>
              <button class="palette-item" data-furniture="jukebox" type="button">
                <span class="swatch"></span>
                <span class="label">Jukebox</span>
              </button>
              <button class="palette-item" data-furniture="kitchenIsland" type="button">
                <span class="swatch"></span>
                <span class="label">Kitchen Island</span>
              </button>
              <button class="palette-item" data-furniture="kitchenTable" type="button">
                <span class="swatch"></span>
                <span class="label">Kitchen Table</span>
              </button>
              <button class="palette-item" data-furniture="largeFridge" type="button">
                <span class="swatch"></span>
                <span class="label">Large Fridge</span>
              </button>
              <button class="palette-item" data-furniture="medicalBed" type="button">
                <span class="swatch"></span>
                <span class="label">Medical Bed</span>
              </button>
              <button class="palette-item" data-furniture="medCabinet" type="button">
                <span class="swatch"></span>
                <span class="label">Medical Cabinet</span>
              </button>
              <button class="palette-item" data-furniture="medicalCounter" type="button">
                <span class="swatch"></span>
                <span class="label">Medical Counter</span>
              </button>
              <button class="palette-item" data-furniture="medicalTray" type="button">
                <span class="swatch"></span>
                <span class="label">Medical Tray</span>
              </button>
              <button class="palette-item" data-furniture="metalShelf" type="button">
                <span class="swatch"></span>
                <span class="label">Metal Shelf</span>
              </button>
              <button class="palette-item" data-furniture="microwave" type="button">
                <span class="swatch"></span>
                <span class="label">Microwave</span>
              </button>
              <button class="palette-item" data-furniture="miniFridge" type="button">
                <span class="swatch"></span>
                <span class="label">Mini Fridge</span>
              </button>
              <button class="palette-item" data-furniture="nightstand" type="button">
                <span class="swatch"></span>
                <span class="label">Nightstand</span>
              </button>
              <button class="palette-item" data-furniture="officeTable" type="button">
                <span class="swatch"></span>
                <span class="label">Office Table</span>
              </button>
              <button class="palette-item" data-furniture="oldOven" type="button">
                <span class="swatch"></span>
                <span class="label">Old Oven</span>
              </button>
              <button class="palette-item" data-furniture="shelf" type="button">
                <span class="swatch"></span>
                <span class="label">Open Shelf</span>
              </button>
              <button class="palette-item" data-furniture="poolTable" type="button">
                <span class="swatch"></span>
                <span class="label">Pool Table</span>
              </button>
              <button class="palette-item" data-furniture="schoolLockers" type="button">
                <span class="swatch"></span>
                <span class="label">School Lockers</span>
              </button>
              <button class="palette-item" data-furniture="shower" type="button">
                <span class="swatch"></span>
                <span class="label">Shower</span>
              </button>
              <button class="palette-item" data-furniture="sink" type="button">
                <span class="swatch"></span>
                <span class="label">Sink</span>
              </button>
              <button class="palette-item" data-furniture="steelCounter" type="button">
                <span class="swatch"></span>
                <span class="label">Steel Counter</span>
              </button>
              <button class="palette-item" data-furniture="storageBox" type="button">
                <span class="swatch"></span>
                <span class="label">Storage Box</span>
              </button>
              <button class="palette-item" data-furniture="stove" type="button">
                <span class="swatch"></span>
                <span class="label">Stove</span>
              </button>
              <button class="palette-item" data-furniture="toilet" type="button">
                <span class="swatch"></span>
                <span class="label">Toilet</span>
              </button>
              <button class="palette-item" data-furniture="toolCabinet" type="button">
                <span class="swatch"></span>
                <span class="label">Tool Cabinet</span>
              </button>
              <button class="palette-item" data-furniture="towelRack" type="button">
                <span class="swatch"></span>
                <span class="label">Towel Rack</span>
              </button>
              <button class="palette-item" data-furniture="trashcan" type="button">
                <span class="swatch"></span>
                <span class="label">Trash Can</span>
              </button>
              <button class="palette-item" data-furniture="tvStand" type="button">
                <span class="swatch"></span>
                <span class="label">TV Stand</span>
              </button>
              <button class="palette-item" data-furniture="wallShelf" type="button">
                <span class="swatch"></span>
                <span class="label">Wall Shelf</span>
              </button>
              <button class="palette-item" data-furniture="washer" type="button">
                <span class="swatch"></span>
                <span class="label">Washing Machine</span>
              </button>
              <button class="palette-item" data-furniture="wardrobe" type="button">
                <span class="swatch"></span>
                <span class="label">Wardrobe</span>
              </button>
              <button class="palette-item" data-furniture="waterBarrel" type="button">
                <span class="swatch"></span>
                <span class="label">Water Barrel</span>
              </button>
              <button class="palette-item" data-furniture="waterTank" type="button">
                <span class="swatch"></span>
                <span class="label">Water Cooler</span>
              </button>
              <button class="palette-item" data-furniture="whiteboard" type="button">
                <span class="swatch"></span>
                <span class="label">Whiteboard</span>
              </button>
              <button class="palette-item" data-furniture="woodCounter" type="button">
                <span class="swatch"></span>
                <span class="label">Wood Counter</span>
              </button>
            </div>
          </div>
        </div>

        <div class="panel" id="properties-section" style="--delay: 0.3s">
          <div class="panel-header">
            <h2>Properties</h2>
            <button class="panel-toggle" data-panel-toggle type="button" aria-expanded="true">-</button>
          </div>
          <div class="panel-body">
            <div class="properties-grid">
              <div class="property-item">
                <span class="property-label">Mode</span>
                <span class="property-value" id="property-mode">Cursor</span>
              </div>
              <div class="property-item">
                <span class="property-label">Selected</span>
                <span class="property-value" id="selected-name">Sand Floor</span>
              </div>
              <div class="property-item">
                <span class="property-label">Rotation</span>
                <span class="property-value" id="property-rotation">0 deg</span>
              </div>
              <div class="property-item">
                <span class="property-label">Blend</span>
                <span class="property-value" id="property-blend">None</span>
              </div>
              <div class="property-item">
                <span class="property-label">Grid</span>
                <span class="property-value" id="property-grid">20 x 20</span>
              </div>
              <div class="property-item">
                <span class="property-label">Zoom</span>
                <span class="property-value" id="property-zoom">100%</span>
              </div>
            </div>
            <button id="clear-all" class="btn subtle" type="button">Clear Blueprint</button>
          </div>
        </div>
      </aside>
    </main>

    <div class="status-dock" id="status-dock" aria-label="Status">
      <div class="status-stack">
        <div class="status-chip" id="status-grid">Grid: 20 x 20</div>
        <div class="action-group zoom-controls" role="group" aria-label="Zoom">
          <button id="zoom-out" class="chip" type="button">-</button>
          <button id="zoom-reset" class="chip" type="button">100%</button>
          <button id="zoom-in" class="chip" type="button">+</button>
        </div>
      </div>
      <div class="minimap">
        <canvas id="minimap" width="120" height="120"></canvas>
      </div>
    </div>

    <div class="options-dock" id="options-dock" aria-label="Options">
      <button id="options-btn" class="options-btn" type="button">Options</button>
      <div class="options-popover is-hidden" id="options-popover" role="dialog" aria-label="Options menu">
        <div class="options-group">
          <button id="toggle-grid" class="chip is-active" type="button">Grid On</button>
          <button id="toggle-snap" class="chip is-active" type="button">Snap On</button>
        </div>
        <div class="options-group">
          <button id="toggle-ui" class="chip" type="button">Toggle UI</button>
          <button id="toggle-drawer" class="chip" type="button">Panels</button>
        </div>
        <div class="options-group">
          <button id="reset-btn" class="chip danger" type="button">Reset</button>
        </div>
      </div>
    </div>

    <div class="tool-drawer" id="tool-drawer" aria-label="Tool drawer">
      <div class="drawer-bar">
        <div class="drawer-group">
          <button id="drawer-undo" class="drawer-btn" data-action="undo" type="button" data-tooltip="Undo" aria-label="Undo">
            <svg viewBox="0 0 24 24" role="presentation" focusable="false">
              <path d="M9 7H4v5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              <path d="M4 12c2.5-4 8-6 12-2 2.5 2.5 2.5 6.5 0 9" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
            </svg>
          </button>
          <button id="drawer-redo" class="drawer-btn" data-action="redo" type="button" data-tooltip="Redo" aria-label="Redo">
            <svg viewBox="0 0 24 24" role="presentation" focusable="false">
              <path d="M15 7h5v5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              <path d="M20 12c-2.5-4-8-6-12-2-2.5 2.5-2.5 6.5 0 9" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
            </svg>
          </button>
        </div>
        <div class="drawer-group drawer-tools">
          <button class="drawer-btn is-active" data-mode="cursor" data-drawer-tool="cursor" type="button" data-tooltip="Cursor" aria-label="Cursor">
            <svg viewBox="0 0 24 24" role="presentation" focusable="false">
              <path d="M5 4l6.5 15 1.8-5.2 5.2-1.8z" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round" />
            </svg>
          </button>
          <button class="drawer-btn" data-mode="floor" data-drawer-tool="floor" type="button" data-tooltip="Floor" aria-label="Floor">
            <svg viewBox="0 0 24 24" role="presentation" focusable="false">
              <rect x="4" y="4" width="16" height="16" rx="2" fill="none" stroke="currentColor" stroke-width="1.6" />
              <path d="M12 4v16M4 12h16" fill="none" stroke="currentColor" stroke-width="1.4" />
            </svg>
          </button>
          <button class="drawer-btn" data-mode="wall" data-drawer-tool="wall" type="button" data-tooltip="Wall" aria-label="Wall">
            <svg viewBox="0 0 24 24" role="presentation" focusable="false">
              <rect x="4" y="6" width="16" height="12" rx="1.5" fill="none" stroke="currentColor" stroke-width="1.6" />
              <path d="M4 12h16M9 6v6M15 12v6" fill="none" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" />
            </svg>
          </button>
          <button class="drawer-btn" data-mode="door" data-drawer-tool="door" type="button" data-tooltip="Door" aria-label="Door">
            <svg viewBox="0 0 24 24" role="presentation" focusable="false">
              <rect x="6" y="4" width="12" height="16" rx="1.5" fill="none" stroke="currentColor" stroke-width="1.6" />
              <circle cx="14" cy="12" r="1" fill="currentColor" />
            </svg>
          </button>
          <button class="drawer-btn" data-mode="furniture" data-drawer-tool="furniture" type="button" data-tooltip="Furniture" aria-label="Furniture">
            <svg viewBox="0 0 24 24" role="presentation" focusable="false">
              <rect x="5" y="10" width="14" height="6" rx="2" fill="none" stroke="currentColor" stroke-width="1.6" />
              <path d="M7 10V8h10v2M7 16v2M17 16v2" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" />
            </svg>
          </button>
          <button class="drawer-btn" data-mode="rooms" data-drawer-tool="rooms" type="button" data-tooltip="Room" aria-label="Room">
            <svg viewBox="0 0 24 24" role="presentation" focusable="false">
              <rect x="5" y="5" width="14" height="14" rx="2" fill="none" stroke="currentColor" stroke-width="1.6" stroke-dasharray="3 2" />
            </svg>
          </button>
          <button class="drawer-btn drawer-erase" data-mode="erase" data-drawer-tool="erase" type="button" data-tooltip="Erase" aria-label="Erase">
            <svg viewBox="0 0 24 24" role="presentation" focusable="false">
              <path d="M5 15l6-6 6 6-4 4H9z" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round" />
              <path d="M13 19h6" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" />
            </svg>
          </button>
        </div>
        <div class="drawer-group drawer-categories is-hidden" id="drawer-categories" aria-label="Drawer categories"></div>
        <div class="drawer-selection" id="drawer-selection">
          <span class="drawer-selection-icon" aria-hidden="true"></span>
          <span class="drawer-selection-text">Cursor</span>
        </div>
      </div>
      <div class="drawer-popover is-hidden" id="drawer-popover"></div>
      <div class="drawer-search is-hidden" id="drawer-search">
        <input id="drawer-search-input" type="search" placeholder="Search tiles, walls, furniture" aria-label="Search drawer" />
        <div class="drawer-search-results" id="drawer-search-results" aria-live="polite"></div>
      </div>
    </div>
  </div>

  <div class="help-backdrop is-hidden" id="help-backdrop"></div>
  <div class="help-panel is-hidden" id="help-panel" role="dialog" aria-label="Help">
    <div class="help-header">
      <h2>Help</h2>
      <button id="help-close" class="chip" type="button">Close</button>
    </div>
    <div class="help-body">
      <div class="help-section">
        <h3>Legend</h3>
        <div class="legend">
          <div class="legend-item">
            <span class="legend-swatch floor-default"></span>
            Floor
          </div>
          <div class="legend-item">
            <span class="legend-swatch wall-swatch"></span>
            Wall
          </div>
          <div class="legend-item">
            <span class="legend-swatch door-swatch"></span>
            Door
          </div>
          <div class="legend-item">
            <span class="legend-swatch furniture-swatch"></span>
            Furniture
          </div>
        </div>
      </div>
      <div class="help-section">
        <h3>Tips</h3>
        <ul class="help-list">
          <li>Use Cursor mode to pan the canvas.</li>
          <li>Hold to paint floors and drag for rooms.</li>
          <li>Walls and doors snap to tile edges.</li>
        </ul>
      </div>
      <div class="help-section">
        <h3>Shortcuts</h3>
        <ul class="help-list">
          <li>R: rotate selected furniture or tool.</li>
          <li>Ctrl/Cmd + Z: undo.</li>
          <li>Ctrl/Cmd + Y: redo.</li>
        </ul>
      </div>
      <div class="help-section">
        <h3>Sharing</h3>
        <p>Use Share to copy a link that opens your current build on the live site.</p>
      </div>
    </div>
  </div>

  <div class="toast-stack" id="toast-stack" aria-live="polite"></div>

  <script type="module" src="js/app.js"></script>
</body>

</html>







